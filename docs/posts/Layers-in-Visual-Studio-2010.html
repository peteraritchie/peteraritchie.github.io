

<!DOCTYPE HTML>
<!--
	Solid State by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Peter Ritchie&#x27;s Blog - Layers in Visual Studio 2010</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="/assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="/assets/sass/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="/assets/sass/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="/assets/sass/ie8.css" /><![endif]-->
        

	</head>
	<body>

		<!-- Page Wrapper -->
			<div id="page-wrapper">
				
				<!-- Header -->
				<header id="header">
					<h1><a href="/">Peter Ritchie&#x27;s Blog</a></h1>
					<nav>
						<a href="#menu">Menu</a>
					</nav>
				</header>

				<!-- Menu -->
				<nav id="menu">
					<div class="inner">
						<h2>Menu</h2>
						<ul class="links">
							        <li><a href="/posts">Archive</a></li>
        <li><a href="/tags">Tags</a></li>
        <li><a href="/about">About</a></li>

						</ul>
						<a href="#" class="close">Close</a>
					</div>
				</nav>


    
<section id="banner">
  <div class="inner">
    <h2>Layers in Visual Studio 2010</h2>
            <p><em>Published on Saturday, May 8, 2010</em></p>
                    <a role="button" href="/tags/DevCenterPost" class="button small">DevCenterPost</a>
                <a role="button" href="/tags/May-2010" class="button small">May 2010</a>
                <a role="button" href="/tags/msmvps" class="button small">msmvps</a>
                <a role="button" href="/tags/Visual-Studio-2010" class="button small">Visual Studio 2010</a>
  </div>
</section>

				<!-- Main -->
				<section id="wrapper">
					<section class="wrapper style2">
						<div class="inner">
							

<p><a href="http://blogs.msmvps.com/peterritchie/2010/05/08/layers-in-visual-studio-2010/" title="Permalink to Layers in Visual Studio 2010">Source</a></p>
<h1 id="layers-in-visual-studio-2010">Layers in Visual Studio 2010</h1>
<p>Visual Studio 2010 has a new featured called Layer Diagrams. In the Ultimate edition you can create layer diagrams that model the logical layers in your software system.</p>
<h2 id="what-is-a-layer">What is a Layer?</h2>
<p>I'm glad you asked what a layer is. A layer is a logical grouping of types with similar external assembly dependencies. Dependencies between layers occur only in one direction from a higher-level layer to a lower-level layer. I.e. a higher-level layer can use types in a lower-level layer, but not vice versa. A canonical example is the Data Access Layer (or DAL). The DAL contains all the types that directly use types responsible for data-access.</p>
<h2 id="using-the-layer-diagram">Using the Layer Diagram</h2>
<p>Within the Layer Diagram user interface, it can be unclear what a layer is. The Layer Diagram is really just a dependency diagram that allows creation of a logical layer that can be linked to physical artefacts.</p>
<p>Creating a layer diagram in Visual Studio Ultimate is easy, select New Diagram from the Architecture menu and the Add New Diagram dialog will be displayed.</p>
<p><img src="http://msmvps.com/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/peterritchie.metablogapi/8053.vsarchnewdiagram_5F00_thumb_5F00_46279258.png" class="img-fluid" alt="vs-arch-new diagram" title="vs-arch-new diagram" /></p>
<p>In the Add New Diagram dialog, select the Layer Diagram entry and enter the name of the layer diagram file.</p>
<p><img src="http://msmvps.com/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/peterritchie.metablogapi/1425.vsaddnewdiagram_5F00_thumb_5F00_2DD4783D.png" class="img-fluid" alt="vs-add new diagram" title="vs-add new diagram" /></p>
<p>If your solution does not currently contain a Modeling project, one will be created automatically when you press OK as indicated by &quot;Create a new modelling project…&quot; in the <strong>Add to modeling project</strong> combo box.</p>
<p>Once the modeling project is created and the new layer diagram is added to that project, you will be presented with the Layer Diagram design surface. You have many options to creating a layer in the diagram, you can use entries in the toolbox to create layers, dependencies, and comments:</p>
<p><img src="http://msmvps.com/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/peterritchie.metablogapi/2086.layerdiagramtoolbox_5F00_thumb_5F00_46EFD275.png" class="img-fluid" alt="layer diagram toolbox" title="layer diagram toolbox" /></p>
<p>Or, you can drag artefacts from the Solution Explorer or the Architecture Explorer to create layers in various ways. Normal dragging of a single artefact onto the design service creates a new layer with a one-to-one mapping (a &quot;link&quot; in Layer Diagrams) from layer to artefact. This is especially useful for projects from the solution explorer. It's not uncommon for logical layers to be implemented as tiers (or physical assemblies). Or, you can create a one-to-many mapping from layer to artefacts by normal dragging of artefacts onto the design surface. This is useful when you're modeling layers but haven't modeled them as tiers and multiple layers exist in a single assembly or project. Via the Architecture Explorer and the Solution Explorer you can link assemblies (projects), types, namespaces, methods, properties, fields, and files to a layer.</p>
<p>Regardless of how the layer was created on the diagram, you can add links to it by dragging them from the Solution Explorer or Architecture Explorer onto a layer to create a link to it. Oddly, although you can link to classes and namespaces, you can't drag classes or namespaces from the Class View onto the Layer Diagram design surface.</p>
<p>The following diagram was created by dragging three projects from the Solution Explorer to the design surface and invoking Generate Dependencies on all three of the created layers:</p>
<p><img src="http://msmvps.com/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/peterritchie.metablogapi/2570.LayerDiagram_5F00_thumb_5F00_0575201C.png" class="img-fluid" alt="Layer Diagram" title="Layer Diagram" /></p>
<p>Once a layer model has been defined, you can then ask Visual Studio to validate the solution against that logical architecture. Within the layer diagram you can have a one-to-one mapping of layer to links, or a one-to-many mapping. i.e. a layer can consist of one or more links (at least in terms of validation—you can have zero links in a layer if you want; but then VS has no information with which to validate anything). If, for whatever reason, the current solution doesn't follow the logical architecture, an error will result. You can also configure the solution to automatically validate the solution against the layer diagram during a build. This build-time validate can occur in both the Ultimate and Premiums editions of Visual Studio 2010.</p>
<h2 id="why-is-it-really-just-a-dependency-diagram">Why is it really just a Dependency Diagram?</h2>
<p>Another really good question! The Layer Diagram is really just a dependency diagram because there's no inherent recognition for layer levels. Because there's no way of defining a level, there's no way to group layers within a specific level. Layer diagrams also allow bi-directional dependencies; a definite no-no with two layers at different levels. It's also really difficult to really enforce only a particular layer having references to particular external references. You can declare forbidden namespaces for a particular layer, but it's a cumbersome method of enforcing references to particular components only occur in a certain layer. For example, if I had a DAL and I wanted to make sure only data-access occurred in that layer, I could add &quot;System.Data&quot; to the Forbidden Namespace Dependencies for all layers expect the DAL and incur an error with Layer Validation should any types from System.Data be used in any of those Layers. But, things like DataGridView in Windows Forms are used primarily with types in System.Data so it becomes difficult to manage these dependencies.</p>


<div id="disqus_thread"></div>  
<!--
    'Layers-in-Visual-Studio-2010'
    'Layers in Visual Studio 2010'
    'http://blog.peterritchie.com/posts/Layers-in-Visual-Studio-2010'
-->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

    var fromJekyllDate = new Date('Wed Feb 01 2022');
    var publishedDate = new Date('5/8/2010');
    console.info('Layers-in-Visual-Studio-2010');

    var disqus_identifier = '';
    var disqus_shortname = 'peterritchiesblog'; // required: replace example with your forum shortname
    var disqus_title = 'Layers in Visual Studio 2010';
    var disqus_url = 'http://blog.peterritchie.com/posts/Layers-in-Visual-Studio-2010';

    if(publishedDate < fromJekyllDate)
    {
        disqus_url = disqus_url.replace('/posts', '');
        disqus_url = disqus_url + '/';
    }
    else
    {
        //var disqus_identifier = 'Layers-in-Visual-Studio-2010';
    }
    console.info(disqus_identifier);

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
						</div>
					</section>
				
				</section>
				
				<!-- Footer -->
                <footer id="footer">
                    <div class="container">
        <div class="row">
                <div class="col-md-12 text-center">
                    <p class="copyright text-muted">
                        Copyright © Peter Ritchie&#x27;s Blog 2022
                        <br />
                            <a href="/feed.xml"><i class="fa fa-rss"></i> RSS Feed</a>
                        |
                            <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <strong><a href="https://wyam.io">Generated by "Wyam"</a></strong>
                    </p>
                </div>
        </div>
</div>
                </footer>
			</div>

		<!-- Scripts -->
			<script src="/assets/js/skel.min.js"></script>
			<script src="/assets/js/jquery.min.js"></script>
			<script src="/assets/js/jquery.scrollex.min.js"></script>
			<script src="/assets/js/util.js"></script>
            <!--[if lte IE 8]><script src="/assets/js/ie/respond.min.js"></script><![endif]-->
            <script src="/assets/js/main.js"></script>

	</body>

</html>