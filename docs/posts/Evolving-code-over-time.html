

<!DOCTYPE HTML>
<!--
	Solid State by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Peter Ritchie&#x27;s Blog - Evolving code over time</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="/assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="/assets/sass/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="/assets/sass/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="/assets/sass/ie8.css" /><![endif]-->
        

	</head>
	<body>

		<!-- Page Wrapper -->
			<div id="page-wrapper">
				
				<!-- Header -->
				<header id="header">
					<h1><a href="/">Peter Ritchie&#x27;s Blog</a></h1>
					<nav>
						<a href="#menu">Menu</a>
					</nav>
				</header>

				<!-- Menu -->
				<nav id="menu">
					<div class="inner">
						<h2>Menu</h2>
						<ul class="links">
							        <li><a href="/posts">Archive</a></li>
        <li><a href="/tags">Tags</a></li>
        <li><a href="/about">About</a></li>

						</ul>
						<a href="#" class="close">Close</a>
					</div>
				</nav>


    
<section id="banner">
  <div class="inner">
    <h2>Evolving code over time</h2>
            <p><em>Published on Monday, March 30, 2009</em></p>
                    <a role="button" href="/tags/NET-Development" class="button small">.NET Development</a>
                <a role="button" href="/tags/C%23" class="button small">C#</a>
                <a role="button" href="/tags/Design/Coding-Guidance" class="button small">Design/Coding Guidance</a>
                <a role="button" href="/tags/March-2009" class="button small">March 2009</a>
                <a role="button" href="/tags/msmvps" class="button small">msmvps</a>
                <a role="button" href="/tags/Software-Development" class="button small">Software Development</a>
                <a role="button" href="/tags/Software-Development-Guidance" class="button small">Software Development Guidance</a>
                <a role="button" href="/tags/Visual-Studio-2010-Best-Practices" class="button small">Visual Studio 2010 Best Practices</a>
  </div>
</section>

				<!-- Main -->
				<section id="wrapper">
					<section class="wrapper style2">
						<div class="inner">
							

<p><a href="http://blogs.msmvps.com/peterritchie/2009/03/30/evolving-code-over-time/" title="Permalink to Evolving code over time">Source</a></p>
<h1 id="evolving-code-over-time">Evolving code over time</h1>
<p>Given economics, time constraints, resource limitations, etc.; you can't write all the functionality for a given solution for a single release. Even if you weren't limited by these constraints, you're likely to get changing requirements as development progresses and everyone learns more about the software under development.</p>
<p>It's fairly easy to prioritize what is developed and what isn't. You simply develop only what you need (see YAGNI). But, how do you manage adding new functionality without causing undue grief? One way is to only make additive changes to the code. For example, let's say we have the method create CreateRequestPacket that creates a blob of bytes to send to a host over the wire:</p>
<blockquote class="blockquote">
<p>public static byte[] CreateRequestPacket()<br />
{<br />
byte[] result = new byte[12];<br />
result[0] = REQUEST_CODE;<br />
result[1] = NO_OPTIONAL_DATA_FLAG;<br />
result[2] = (byte) (result.Length – 2);</p>
<p>Random random = new Random();<br />
for(int i = 3; i &lt; result.Length; ++i)<br />
{<br />
result[i] = (byte) (random.Next() % byte.MaxValue);<br />
}<br />
return result;<br />
}</p>
</blockquote>
<p>In iteration x it writes out a request making certain assumptions about what the request contains. But, in iteration y it needs to optionally include other data. A non additive way is to simply modify CreateRequestPacket to do what is needed:</p>
<blockquote class="blockquote">
<p>public static byte[] CreateRequestPacket(bool useOptionalData)<br />
{<br />
byte[] result = new byte[12];<br />
result[0] = REQUEST_CODE;<br />
result[1] = OPTIONAL_DATA_FLAG;<br />
int index = 2;<br />
if(useOptionalData)<br />
{<br />
result[index] = GetOptionalData();<br />
++index;<br />
}<br />
result[index] = (byte) (result.Length – index);</p>
<p>Random random = new Random();<br />
for(int i = index + 1; i &lt; result.Length; ++i)<br />
{<br />
result[i] = (byte) (random.Next() % byte.MaxValue);<br />
}<br />
return result;<br />
}</p>
</blockquote>
<p>Now all calls to CreateRequestPacket need to change before a build can occure and you might not be able to modify all the files that contain these calls. So it causes undue blocking and forces you to change a number of files before you can check the file that CreateRequestPacket is contained withing.</p>
<p>Another way of implementing this would be to implement an additive change. That is, add a method that does what is needed and change the previous implementation to call the new method. For example:</p>
<blockquote class="blockquote">
<p>public static byte[] CreateRequestPacket(bool useOptionalData)<br />
{<br />
byte[] result = new byte[12];<br />
result[0] = REQUEST_CODE;<br />
result[1] = OPTIONAL_DATA_FLAG;<br />
int index = 2;<br />
if(useOptionalData)<br />
{<br />
result[index] = GetOptionalData();<br />
++index;<br />
}<br />
result[index] = (byte) (result.Length – index);</p>
<p>Random random = new Random();<br />
for(int i = index + 1; i &lt; result.Length; ++i)<br />
{<br />
result[i] = (byte) (random.Next() % byte.MaxValue);<br />
}<br />
return result;<br />
}</p>
<p>public static byte[] CreateRequestPacket()<br />
{<br />
return CreateRequestPacket(false);<br />
}</p>
</blockquote>
<p>This allows you to check the file that contains CreateRequestPacket in right after passing unit testing and allows you to gradually change all calls to CreateRequestPacket as time permits.</p>


<div id="disqus_thread"></div>  
<!--
    'Evolving-code-over-time'
    'Evolving code over time'
    'http://blog.peterritchie.com/posts/Evolving-code-over-time'
-->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

    var fromJekyllDate = new Date('Wed Feb 01 2022');
    var publishedDate = new Date('3/30/2009');
    console.info('Evolving-code-over-time');

    var disqus_identifier = '';
    var disqus_shortname = 'peterritchiesblog'; // required: replace example with your forum shortname
    var disqus_title = 'Evolving code over time';
    var disqus_url = 'http://blog.peterritchie.com/posts/Evolving-code-over-time';

    if(publishedDate < fromJekyllDate)
    {
        disqus_url = disqus_url.replace('/posts', '');
        disqus_url = disqus_url + '/';
    }
    else
    {
        //var disqus_identifier = 'Evolving-code-over-time';
    }
    console.info(disqus_identifier);

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
						</div>
					</section>
				
				</section>
				
				<!-- Footer -->
                <footer id="footer">
                    <div class="container">
        <div class="row">
                <div class="col-md-12 text-center">
                    <p class="copyright text-muted">
                        Copyright © Peter Ritchie&#x27;s Blog 2022
                        <br />
                            <a href="/feed.xml"><i class="fa fa-rss"></i> RSS Feed</a>
                        |
                            <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <strong><a href="https://wyam.io">Generated by "Wyam"</a></strong>
                    </p>
                </div>
        </div>
</div>
                </footer>
			</div>

		<!-- Scripts -->
			<script src="/assets/js/skel.min.js"></script>
			<script src="/assets/js/jquery.min.js"></script>
			<script src="/assets/js/jquery.scrollex.min.js"></script>
			<script src="/assets/js/util.js"></script>
            <!--[if lte IE 8]><script src="/assets/js/ie/respond.min.js"></script><![endif]-->
            <script src="/assets/js/main.js"></script>

	</body>

</html>