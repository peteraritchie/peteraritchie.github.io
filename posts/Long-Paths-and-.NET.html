
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Peter Ritchie&#x27;s Blog - Long Paths and .NET</title>
        <meta name="description" content="Peter Ritchie" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Peter Ritchie&#x27;s Blog" href="/feed.xml" />
                <link type="application/atom+xml" rel="alternate" title="Peter Ritchie&#x27;s Blog" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Peter Ritchie&#x27;s Blog" />
        <meta name="msapplication-tooltip" content="Peter Ritchie&#x27;s Blog" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Peter Ritchie&#x27;s Blog - Long Paths and .NET" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://blog.peterritchie.com/posts/Long-Paths-and-.NET" />
        <!-- TODO: More social graph meta tags -->

        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Peter Ritchie&#x27;s Blog</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                        <li><a href="/posts">Archive</a></li>
        <li><a href="/tags">Tags</a></li>
        <li><a href="/about">About</a></li>
 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>Long Paths and .NET</h1>
    <div class="meta">        
Published on Wednesday, July 23, 2014<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/NET-45" class="btn btn-default btn-xs">.NET 4.5</a>
                    <a role="button" href="/tags/NET-Development" class="btn btn-default btn-xs">.NET Development</a>
                    <a role="button" href="/tags/C%23" class="btn btn-default btn-xs">C#</a>
                    <a role="button" href="/tags/July-2014" class="btn btn-default btn-xs">July 2014</a>
                    <a role="button" href="/tags/LongPath" class="btn btn-default btn-xs">LongPath</a>
                    <a role="button" href="/tags/Open-Source" class="btn btn-default btn-xs">Open Source</a>
                    <a role="button" href="/tags/Software-Development" class="btn btn-default btn-xs">Software Development</a>
                    <a role="button" href="/tags/msmvps" class="btn btn-default btn-xs">msmvps</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<p><a href="http://pr-blog.azurewebsites.net/2014/07/23/long-paths-and-net/" title="Permalink to Long Paths and .NET">Source</a></p>
<h1 id="long-paths-and.net">Long Paths and .NET</h1>
<p>If you've been following me on Twitter the last little while you might have noticed a few tweets bemoaning long paths in .NET code. This hasn't been something new to me, but I decided to attempt to do something about it in the last little while.</p>
<p>Supporting files and directories with a long path is fairly easy with Windows. Unfortunately, other aspects of Windows haven't supported long paths in their entirely. The file system (NTFS), for example, supports long paths quite well; but other things like Command Prompt and Explorer don't. This makes it hard to entirely support long paths in <em>any</em> application, let alone in .NET.x</p>
<h2 id="what-is-long-path">What is &quot;long path&quot;?</h2>
<p>Some of you (and I envy you) probably don't know what a &quot;long path&quot; is. It's different from &quot;long names&quot;—which is a filename long than the archaic 8.3 filenames and support spaces. Windows, for the longest time (and still does, for that matter) supported <em>paths</em> (drive specifier, directory, subdirectories, filename, extension) <em>up to</em> about 260 chars. There are multiple ways to <em>get around</em> that (which actually create long paths and lead you down a path of anguish) but to support paths larger that 260 chars you have to use the long path support in Windows (and NTFS). This support (which is essentially Unicode paths) supports up to 32,000 characters in a path. (don't talk to me if you reach <strong>that</strong> limit). This still has its limits in that a <em>directory</em> is still limited to 256 characters (which is really a feature of the driver for that file system—but NTFS, last time I checked, supports up to to 256 characters per directory (which stems from 260: 256 chars for a directory, 3 chars for the drive specifier and one char for the null). But, 256 chars for a directory name ought to be enough for everyone :).</p>
<h2 id="section"></h2>
<h2 id="supporting-a-long-path-in.net">Supporting a Long Path in .NET</h2>
<p>This has been a bit tricky in .NET. Several attempts like <a href="http://longpaths.codeplex.com/">longpaths.codeplex.com</a> (a more up to date version has made its way into .NET in classes like <a href="http://referencesource.microsoft.com/#mscorlib/system/io/longpath.cs">LongPath</a> <a href="http://referencesource.microsoft.com/#mscorlib/system/io/longpath.cs#734b3020e7ff04fe#references">LongPathFile</a> and <a href="http://referencesource.microsoft.com/#mscorlib/system/io/longpath.cs#ed4ae27b0c89bf61#references">LongPathDirectory</a>. But, these libraries do not seem to support the entire original API (<code>Path</code>, <code>File</code>, <code>Directory</code>) and not all file-related APSs (including <code>FileInfo</code>, <code>DirectoryInfo</code>, <code>FileSystemInfo</code>).</p>
<p>Often times long path support is an after thought. Usually after you've released something and someone logs bug (e.g. &quot;When I use a path like c:users_300 chars removed_Document.docx your software gives me an error&quot;. You can likely support long paths with the above-mentioned libraries, but you end up having to scrub your existing code that works with regular paths and re-design it to suit these new APIs (causing full re-tests, potential new errors, potential regressions, etc.).</p>
<p><strong>So, I'm announcing an open-source library that I've created: <a href="http://bitly.com/UrdLZq">**LongPath</a></strong>**** (or <a href="http://bitly.com/1qAplAD">**Pri.LongPath</a>****** on nuget).**</p>
<p>LongPath is a .NET 4.5 library that attempts to make dealing with long paths <em>much</em> easier. LongPath originally started as a fork of LongPaths on Codeplex; but after initial usage it was clear that much more work was involved to better support long paths. So, I drastically expanded the API scope to include <code>FileInfo</code>, <code>DirectoryInfo</code>, <code>FileSystemInfo</code> to get 100% API coverage supporting long paths. (with one caveat: <code>Directory.SetCurrentDirectory</code>, Windows does not support long paths for a current directory).</p>
<p>LongPaths allows your code to support long paths by providing a drop-in replacement for the following <code>System.IO</code> types: <code>FileInfo</code>, <code>DirectoryInfo</code>, <code>FileSystemInfo</code>, <code>FileInfo</code>, <code>DirectoryInfo</code>, <code>FileSystemInfo</code>. You simply reference the Pri.LongPath types you need and you don't need to change your code.</p>
<p>Obviously to replace only 6 types in a namespaces (<code>System.IO</code>) and not the rest is problematic because you're going to need to use some of those other types (<code>FileNotFoundException</code>, <code>FileMode</code>, etc.)–which means referencing <code>System.IO</code> and re-introducing the original 6 types back into your scope. I feft that not having to modify your code was the greater of the two evils. Resolving this conflict is easily solved through aliases. So, if you're used to one of the System.IO classes <code>FileInfo</code>, <code>DirectoryInfo</code>, <code>FileSystemInfo</code>, <code>FileInfo</code>, <code>DirectoryInfo</code>, <code>FileSystemInfo</code>, you simply add the following aliases to your C# file and go on about your business.</p>
<p>I think there's currently 300 test that exercise the library pretty well; but if you find any issues, let me know via an issue on github, or a push request with a failing test. Or, fix it and send me a push request with the fix and a new passing test.</p>
<p>I'm going to add support for prior versions of .NET (and future then they're available) in the next little while (and over time); but if you're interested in contributing, see the issues list on github, or add a new issue, or fork and start making changes.</p>
<p>Enjoy!</p>


<div id="disqus_thread"></div>  
<!--
    'Long-Paths-and-.NET'
    'Long Paths and .NET'
    'http://blog.peterritchie.com/posts/Long-Paths-and-.NET'
-->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

    var fromJekyllDate = new Date('Wed Feb 01 2022');
    var publishedDate = new Date('7/23/14');
    console.info('Long-Paths-and-.NET');

    var disqus_identifier = '';
    var disqus_shortname = 'peterritchiesblog'; // required: replace example with your forum shortname
    var disqus_title = 'Long Paths and .NET';
    var disqus_url = 'http://blog.peterritchie.com/posts/Long-Paths-and-.NET';

    if(publishedDate < fromJekyllDate)
    {
        disqus_url = disqus_url.replace('/posts', '');
        disqus_url = disqus_url + '/';
    }
    else
    {
        //var disqus_identifier = 'Long-Paths-and-.NET';
    }
    console.info(disqus_identifier);

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12 text-center">
                    <p class="copyright text-muted">
                        Copyright © Peter Ritchie&#x27;s Blog 2025
                        <br />
                            <a href="/feed.xml"><i class="fa fa-rss"></i> RSS Feed</a>
                        |
                            <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <strong><a href="https://wyam.io">Generated by "Wyam"</a></strong>
                        <br/>
                        <a rel="me" href="https://dotnet.social/@peterritchie">dotnet.social</a>&nbsp;|&nbsp;<a rel="me" href="https://mastodon.social/@peterritchie">Mastodon.social</a>&nbsp;|&nbsp;<a rel="me" href="https://fosstodon.org/@peterritchie">fosstodon.org</a>&nbsp;|&nbsp;<a rel="me" href="https://twitter.com/peterritchie">Twitter</a>&nbsp;|&nbsp;<a rel="me" href="https://www.linkedin.com/in/peteraritchie/">LinkedIn</a>
                    </p>
                </div>
        </div>
</div>
                </footer> 

                <script src="/assets/js/jquery.min.js"></script>
                <script src="/assets/js/bootstrap.min.js"></script>     
                <script src="/assets/js/highlight.pack.js"></script>   
                <script src="/assets/js/clean-blog.js"></script>
                <script src="/assets/js/d3.v3.min.js"></script>
                <script src="/assets/js/trianglify.min.js"></script>
                <script src="/assets/js/Please-compressed.js"></script>
                <script src="/assets/js/background-check.min.js"></script>

                <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
                <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
                <!--[if lt IE 9]>
                        <script src="/assets/js/html5shiv.js"></script>
                        <script src="/assets/js/respond.min.js"></script>
                <![endif]-->
                
                
                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

