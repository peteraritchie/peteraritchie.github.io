
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Peter Ritchie&#x27;s Blog - Things I Learned Attempting Azure Administrator Associate - Part 2 - Storage</title>
        <meta name="description" content="Peter Ritchie" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Peter Ritchie&#x27;s Blog" href="/feed.xml" />
                <link type="application/atom+xml" rel="alternate" title="Peter Ritchie&#x27;s Blog" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Peter Ritchie&#x27;s Blog" />
        <meta name="msapplication-tooltip" content="Peter Ritchie&#x27;s Blog" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Peter Ritchie&#x27;s Blog - Things I Learned Attempting Azure Administrator Associate - Part 2 - Storage" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://blog.peterritchie.com/posts/things-i-learned-attempting-azure-administrator-associate-part-2" />
        <!-- TODO: More social graph meta tags -->

        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Peter Ritchie&#x27;s Blog</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                        <li><a href="/posts">Archive</a></li>
        <li><a href="/tags">Tags</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="/testing">Testing</a></li>
 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>Things I Learned Attempting Azure Administrator Associate - Part 2 - Storage</h1>
    <div class="meta">        
Published on Thursday, December 22, 2022<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/Azure" class="btn btn-default btn-xs">Azure</a>
                    <a role="button" href="/tags/Azure-Administrator-Associate-(AZ-104)" class="btn btn-default btn-xs">Azure Administrator Associate (AZ-104)</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<p><img src="/assets/DALL%C2%B7E-2022-12-22-17.03.40--distributed-cloud-data-storage-in-the-style-of-salvator-dali.png" class="img-fluid" alt="distributed cloud data storage" /></p>
<p>Azure Administrator Associate certification is about the skills required to be an Azure account, subscription, tenant, etc., administrator. If your end goal is to develop applications on Azure, that involves a lot of <em>administration</em> of Azure resources. Regardless of your plan, storage administration is nuanced. This post focuses on some of those nuances, nuances that may not be apparent in the documentation.</p>
<h3 id="overview">Overview</h3>
<!--capabilities-->
<p>Azure provides storage services for Files, Blobs, Queues, and Tables. Files are blobs that support access via SMB protocol, AKA File Shares. Blobs are web resources that support access via a URI (HTTP). Blob Storage supports two types of blobs: block blobs and page blobs. Table Storage supports key-based relational and document access. Queues support access to ephemeral messages.</p>
<p>Azure Files has a File Sync feature that supports file-level replication across Windows Servers. The Azure File endpoint is also called the Cloud Endpoint and is part of a Sync Group that includes one or more Windows Server file shares.</p>
<p>There are two performance options for Storage Accounts: Standard (general purpose v2) and Premium (for low latency.)</p>
<!--tiers/skus-->
<p>Storage has a couple of storage tiers: Standard and Premium. Storage tiers provide different functionality at different costs. Blob Storage has several access tiers: Hot, Cool, and Archive. Access tiers offer a way to communicate the frequency and type of data access to reduce storage costs. Access tiers can be used to implement a lifecycle for data, moving to lower-cost tiers over time to reduce cost.</p>
<!--durability/high-availability-->
<p>Storage supports data redundancy that makes copies of data to avoid loss due to infrastructure failure. There are several options: Locally-Redundant Storage (LRS), Zone-Redundant storage (ZRS), Geo-Redundant Storage (GRS), and Geo-Zone-Redundant Storage (GZRS). LRS stores three copies of the data asynchronously within a single data center. ZRS duplicates those 3 LRS copies across three availability zones (clusters) in a region. GRS duplicates those 3 LRS asynchronously to a single zone in a secondary region. GZRS duplicates the ZRS data across zones within the secondary region.</p>
<!--data protection-->
<p>Recovery Services is the service responsible for storing backups and recovery points. Recovery Services stores data within Recovery Services Vaults.</p>
<p>Encryption scopes logically group blobs or containers and assign an encryption key specific to that scope.</p>
<!--access control-->
<p>There are a couple options for controlling access to data: Azure AD accounts/groups or Shared Access Signatures (SAS). Azure AD Groups provide a more manageable way to control Azure AD account access to data (than simply Azure AD accounts). SAS provides a granular means to provide delegate access to external entities.</p>
<h3 id="notable-information">Notable information <!--TIL--></h3>
<ul>
<li>LRS protects against rack-level hardware failure (so, if you want data-center-wide failure protection, LRS is insufficient).</li>
<li>LRS is supported for Standard File and Standard Block Blob account types (otherwise, GRS is the default.)</li>
<li>ZRS protects against data loss due to data center failure (so, if you want region-wide failure protection, ZRS is insufficient)</li>
<li>GRS protects against region failure.</li>
<li>GRS and GZRS secondary regions are pre-defined, forcing your data into a specific region.</li>
<li>GZRS protects against region failure and simultaneous data center failure in the secondary region.</li>
<li>When defining a data lifecycle, in the case of a tie, the option that results in the least cost will be chosen.</li>
<li>Migrating from LRS to GRS is supported with a feature called &quot;Live Migration.&quot; Migration from LRS in other scenarios (e.g. to ZRS) must be done manually. Since Premium Storage accounts do not support LRS, Live Migration does not support Premium Storage accounts.</li>
<li>Live migration supports the use case of a storage account failure of GRS-replicated data. GRS is a second LRS in a secondary region. If a region fails, GRS reduces to LRS, so recovering means using Live Migration.</li>
<li>Durability is not backup; it provides access to data when infrastructure recoverability isn't an option. Apart from Live Migration, <em>restoration</em> is limited to manually copying live data when needed.</li>
<li>Durability does not protect against application-level failure; use backups or custom (application-level) durability in those scenarios.</li>
<li>Encryption scopes are useful for providing logical data tenancy.</li>
<li>Files added/modified in a File Share are only detected and replicated to the Windows Server file shares once every 24 hours (i.e., only visible after 24 hours).</li>
<li>Adding a file share to a Sync Group acts like all the files and folders within the file share were just added, replicating to the cloud endpoint and any other file shares.</li>
<li>When applying <em>least privilege</em> to storage accounts, the <strong>Reader</strong> role is also required on the Azure AD account if the Azure AD account needs to navigate storage resources in the Azure Portal.</li>
<li>Asynchronous data redundancy options introduce the possibility of data loss. If the asynchronous duplication to the secondary region did not complete, it is out of sync with the last state of the primary region. Application-level logic is required to prevent loss of data in this scenario.</li>
<li>The Archive tier does not have immediate access; it must be <em>rehydrated</em> to a cool/hot tier first (usually with a Copy Blob operation of up to 15 hours completion time).</li>
<li>File Share storage may be backed up to Recover Service vaults, but Blob Storage may not.</li>
</ul>
<p>This table summarizes the types of storage accounts and the features/redundancy that each support.</p>
<table class="table">
<thead>
<tr>
<th>Account</th>
<th>Redundancy</th>
<th style="text-align: center;">block blob</th>
<th style="text-align: center;">page blob</th>
<th style="text-align: center;">append blob</th>
<th style="text-align: center;">file share</th>
<th style="text-align: center;">queue</th>
<th style="text-align: center;">table</th>
</tr>
</thead>
<tbody>
<tr>
<td>Standard account</td>
<td>LRS</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
</tr>
<tr>
<td>Standard account</td>
<td>GRS</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
</tr>
<tr>
<td>Standard account</td>
<td>GAZRS</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
</tr>
<tr>
<td>Standard account</td>
<td>RA-GZRS</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☑</td>
</tr>
<tr>
<td>Premium Block blobs account</td>
<td>LRS</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
</tr>
<tr>
<td>Premium Block blobs account</td>
<td>ZRS</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
</tr>
<tr>
<td>Premium File shares account</td>
<td>LRS</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
</tr>
<tr>
<td>Premium File shares account</td>
<td>ZRS</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
</tr>
<tr>
<td>Premium Page blobs account</td>
<td>LRS</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
</tr>
<tr>
<td>Premium Page blobs account</td>
<td>ZRS</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☑</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
<td style="text-align: center;">☐</td>
</tr>
</tbody>
</table>


<div id="disqus_thread"></div>  
<!--
    'things-i-learned-attempting-azure-administrator-associate-part-2'
    'Things I Learned Attempting Azure Administrator Associate - Part 2 - Storage'
    'http://blog.peterritchie.com/posts/things-i-learned-attempting-azure-administrator-associate-part-2'
-->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

    var fromJekyllDate = new Date('Wed Feb 01 2022');
    var publishedDate = new Date('12/22/22');
    console.info('things-i-learned-attempting-azure-administrator-associate-part-2');

    var disqus_identifier = '';
    var disqus_shortname = 'peterritchiesblog'; // required: replace example with your forum shortname
    var disqus_title = 'Things I Learned Attempting Azure Administrator Associate - Part 2 - Storage';
    var disqus_url = 'http://blog.peterritchie.com/posts/things-i-learned-attempting-azure-administrator-associate-part-2';

    if(publishedDate < fromJekyllDate)
    {
        disqus_url = disqus_url.replace('/posts', '');
        disqus_url = disqus_url + '/';
    }
    else
    {
        //var disqus_identifier = 'things-i-learned-attempting-azure-administrator-associate-part-2';
    }
    console.info(disqus_identifier);

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12 text-center">
                    <p class="copyright text-muted">
                        Copyright © Peter Ritchie&#x27;s Blog 2025
                        <br />
                            <a href="/feed.xml"><i class="fa fa-rss"></i> RSS Feed</a>
                        |
                            <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <strong><a href="https://wyam.io">Generated by "Wyam"</a></strong>
                        <br/>
                        <a rel="me" href="https://mastodon.social/@peterritchie">Mastodon.social</a>&nbsp;|&nbsp;<a rel="me" href="https://fosstodon.org/@peterritchie">fosstodon.org</a>&nbsp;|&nbsp;<a rel="me" href="https://twitter.com/peterritchie">Twitter</a>&nbsp;|&nbsp;<a rel="me" href="https://www.linkedin.com/in/peteraritchie/">LinkedIn</a>&nbsp;|&nbsp;<a rel="me" href="https://bsky.app/profile/peterritchie.com">Bluesky</a>
                    </p>
                </div>
        </div>
</div>
                </footer> 

                <script src="/assets/js/jquery.min.js"></script>
                <script src="/assets/js/bootstrap.min.js"></script>     
                <script src="/assets/js/highlight.pack.js"></script>   
                <script src="/assets/js/clean-blog.js"></script>
                <script src="/assets/js/d3.v3.min.js"></script>
                <script src="/assets/js/trianglify.min.js"></script>
                <script src="/assets/js/Please-compressed.js"></script>
                <script src="/assets/js/background-check.min.js"></script>

                <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
                <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
                <!--[if lt IE 9]>
                        <script src="/assets/js/html5shiv.js"></script>
                        <script src="/assets/js/respond.min.js"></script>
                <![endif]-->
                
                
                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

